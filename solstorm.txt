Mye læring fra Asbjørn. Her er det en del ting å tenke over.
Han synes det var artig å bli kjent med clusteret, men rart at det ikke finnes noe køsystem


https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax


1. Log på solstorm- 
	host:solstorm-login.iot.ntnu.no     port:22

(2). På min homedirectory (/home/steffejb) ligger følgende fil: .bashrc
	open filezilla og endre på dette dokumentet. Her kan man legge til commands som vil bli utført ved oppstart!
	E.g. : module load Python/3.10.4-GCCcore-11.3.0
	Hidden files in filezilla: Server -> Force showing hidden files

3. screen
	dette trenges bare å gjøre i hovedskriptet

3.1 Bytt til node:		 ssh compute-6-41 

4. Bytt til: 			cd /storage/users/steffejb/StratGods/AIM_Norwegian_Freight_Model

module list
module unload rocks-openmpi					
THE ROCKS OPENMPI LEADS TO AN ERROR!! IT INTERFERES WITH MPI-SPPY

(5). Installer packages
	or do pip3 install
	pip install matplotlib networkx numpy pandas pyomo openpyxl mpi-sppy
6. Git
	git init 				(make sure to initialize git)
	git branch	
	git checkout -f   		(cleanup)
	git checkout Steffen (make sure to be on own branch. Bakker OR main OR djupdal)
	

	git pull 				(get the most recent version)
	git clean -fxd
	git reset –-hard     (write this out to prevent error)
	
	git reset --hard HEAD~1


	git add "file or directory" 		STAGING  
	git reset HEAD -- FILE_NAME                          
	
	git commit -m "cluster_output"
	
	git push

7. Create jobs
	python script_MainAnalysis_TwoStage.py
	it distributes all the tasks. Pick only nodes that have a load of less than 2%

8. RUN CODE
	run on all nodes		./run_all.sh
	run specific			./run_all.sh -r 4 -n 1,2:4
							./run_all.sh -r 4 -n 1,2:4   
	get permission:			chmod +x ./run_all.sh        
	choose nodes:			ssh compute-5-0
	check availibility:		gstat -a		


COMMANDS

ls 				list files
ls -lt 			sort files
ls -la		    list files ALL (also hidden files)
cat ......		read a file
cd .. 			go back up
....|more   #THIS SHOWS ALL TEXT.
 wc  -l output.csv    #length of csv file

who         who have logged onto the node?
top			a list of top process that using the most memory or CPU or disk.
press "q"   to quit

##############
%%% SCREEN %%%
##############

%if no screens do: 
screen
screen -S session_name

%otherwise
screen -list

screen -dr SCREENID

CTR SHIFT  ->  d  : Detach from screen

CTRL A  ->  :quit




##############################
# gitrepository on solstorm ##
###############################


" how to work with ssh config files and switch between ssh
https://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix/
https://dylancastillo.co/how-to-use-github-deploy-keys/

if config file is new do:
	chmod 600 ~/.ssh/config


clone@github:~/.ssh$ ~$ git clone git@github.com:SteffenBakker/AIM_Norwegian_Freight_Model.git

------------------


- SSH KEY: 
	This has been done now. First on your machine generating the ssh key. Then adding it to github account
	https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent
	https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account
	how to acces your public key:     cat ~/.ssh/id_rsa.pub

- Then we clone the git repository:
	git clone https://github.com/SteffenBakker/AIM_Norwegian_Freight_Model.git

	UserName: SteffenBakker
	Password -> personal acces token
	https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token
	finegrainedaccestoken: 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
	THIS WAS NOT WORKING

	PUT THE REPOSITORY ON PUBLIC, THEN IT WORKS!!

- Check which branch you are on:
	git rev-parse --abbrev-ref HEAD

- Change branche
	git checkout Steffen    OR main 

- Update
	git pull

- Clean
	git clean -df
	git checkout -f
